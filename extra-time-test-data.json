{
  "test_scenarios": {
    "scenario_1_approved_extra_time": {
      "description": "Helper requests 2 extra hours, client approves",
      "steps": [
        {
          "step": 1,
          "action": "Helper requests extra time",
          "endpoint": "POST /api/jobs/{jobId}/request-extra-time",
          "headers": {
            "Authorization": "Bearer {helper_jwt_token}",
            "Content-Type": "application/json"
          },
          "body": {
            "extra_hours": 2,
            "reason": "The furniture is heavier than expected and requires additional time for safe moving"
          },
          "expected_response": {
            "success": true,
            "message": "Extra time request submitted successfully",
            "status": "pending_approval"
          }
        },
        {
          "step": 2,
          "action": "Client approves extra time",
          "endpoint": "PUT /api/jobs/{jobId}/approve-extra-time",
          "headers": {
            "Authorization": "Bearer {client_jwt_token}",
            "Content-Type": "application/json"
          },
          "body": {
            "approved": true,
            "message": "Approved. Please take your time to do the job properly."
          },
          "expected_response": {
            "success": true,
            "message": "Extra time request approved",
            "approved": true,
            "total_approved_hours": 4
          }
        },
        {
          "step": 3,
          "action": "Check extra time status",
          "endpoint": "GET /api/jobs/{jobId}/extra-time-status",
          "headers": {
            "Authorization": "Bearer {jwt_token}"
          },
          "expected_response": {
            "extra_time_approved": true,
            "total_approved_hours": 4,
            "can_request_extra_time": false,
            "can_approve_extra_time": false
          }
        }
      ]
    },
    "scenario_2_rejected_extra_time": {
      "description": "Helper requests 3 extra hours, client rejects",
      "steps": [
        {
          "step": 1,
          "action": "Helper requests extra time",
          "endpoint": "POST /api/jobs/{jobId}/request-extra-time",
          "headers": {
            "Authorization": "Bearer {helper_jwt_token}",
            "Content-Type": "application/json"
          },
          "body": {
            "extra_hours": 3,
            "reason": "Need more time to complete the job properly"
          }
        },
        {
          "step": 2,
          "action": "Client rejects extra time",
          "endpoint": "PUT /api/jobs/{jobId}/approve-extra-time",
          "headers": {
            "Authorization": "Bearer {client_jwt_token}",
            "Content-Type": "application/json"
          },
          "body": {
            "approved": false,
            "message": "Please complete within the original timeframe."
          },
          "expected_response": {
            "success": true,
            "message": "Extra time request rejected",
            "approved": false
          }
        }
      ]
    },
    "scenario_3_multiple_requests": {
      "description": "Helper tries to request extra time when one is already pending",
      "steps": [
        {
          "step": 1,
          "action": "First extra time request",
          "endpoint": "POST /api/jobs/{jobId}/request-extra-time",
          "body": {
            "extra_hours": 1,
            "reason": "First request"
          }
        },
        {
          "step": 2,
          "action": "Second extra time request (should fail)",
          "endpoint": "POST /api/jobs/{jobId}/request-extra-time",
          "body": {
            "extra_hours": 2,
            "reason": "Second request"
          },
          "expected_error": "There is already a pending extra time request"
        }
      ]
    }
  },
  "sample_job_data": {
    "job_creation": {
      "title": "Help Move Couch and Dining Table",
      "category": "CLEANING",
      "description": "The job involves moving a large couch and dining table from one room to another. The move should be done carefully to avoid damage to walls and furniture.",
      "payment_type": "HOURLY",
      "job_type": "ANYTIME",
      "price": "40",
      "start_time": "2025-01-08T14:00:00.000Z",
      "end_time": "2025-01-08T16:00:00.000Z",
      "location": "1123 Maple Street, Maryland",
      "latitude": 39.0458,
      "longitude": -76.6413,
      "urgent_note": "Please be careful with the furniture"
    },
    "expected_calculations": {
      "original_estimated_hours": 2,
      "hourly_rate": 20,
      "original_price": 40,
      "with_2_extra_hours": {
        "total_approved_hours": 4,
        "estimated_extra_cost": 40,
        "total_estimated_cost": 80
      }
    }
  },
  "error_scenarios": {
    "unauthorized_helper": {
      "description": "Non-assigned helper tries to request extra time",
      "expected_error": "Only assigned helpers can request extra time"
    },
    "non_hourly_job": {
      "description": "Helper tries to request extra time for fixed-price job",
      "expected_error": "Extra time can only be requested for hourly jobs"
    },
    "wrong_job_status": {
      "description": "Helper tries to request extra time for non-ongoing job",
      "expected_error": "Job not found or not in ongoing status"
    },
    "invalid_extra_hours": {
      "description": "Helper requests invalid amount of extra time",
      "body": {
        "extra_hours": 10,
        "reason": "Too much time"
      },
      "expected_error": "Extra time cannot exceed 8 hours"
    }
  }
}
